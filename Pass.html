<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حاسبة نتائج الامتحان</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #4CAF50;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .description {
            color: #7f8c8d;
            margin-bottom: 20px;
        }
        
        .input-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .input-section {
                grid-template-columns: 1fr;
            }
        }
        
        .subject-card {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            border-left: 4px solid #4CAF50;
        }
        
        .subject-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            display: block;
            margin: 0 auto;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #388E3C;
        }
        
        .results-section {
            margin-top: 30px;
            display: none;
        }
        
        .result-card {
            background-color: #e8f5e9;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .result-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .subject-result {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px dashed #ddd;
        }
        
        .passed {
            color: #4CAF50;
            font-weight: bold;
        }
        
        .failed {
            color: #F44336;
            font-weight: bold;
        }
        
        .summary {
            background-color: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
        }
        
        .explanation {
            background-color: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .explanation-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #1565C0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>حاسبة نتائج الامتحان</h1>
            <p class="description">أدخل العلامات العملية والنظرية لحساب المعدل النهائي</p>
        </header>
        
        <div class="input-section">
            <div class="subject-card">
                <div class="subject-title">الداخلية</div>
                <input type="number" id="practical-internal" min="0" max="30" placeholder="العملي (من 30)">
                <input type="number" id="theoretical-internal" min="0" max="80" placeholder="النظري (من 80)">
            </div>
            
            <div class="subject-card">
                <div class="subject-title">الجلدية</div>
                <input type="number" id="practical-dermatology" min="0" max="30" placeholder="العملي (من 30)">
                <input type="number" id="theoretical-dermatology" min="0" max="80" placeholder="النظري (من 80)">
            </div>
            
            <div class="subject-card">
                <div class="subject-title">الجراحة</div>
                <input type="number" id="practical-surgery" min="0" max="30" placeholder="العملي (من 30)">
                <input type="number" id="theoretical-surgery" min="0" max="80" placeholder="النظري (من 80)">
            </div>
            
            <div class="subject-card">
                <div class="subject-title">العينية</div>
                <input type="number" id="practical-ocular" min="0" max="30" placeholder="العملي (من 30)">
                <input type="number" id="theoretical-ocular" min="0" max="80" placeholder="النظري (من 80)">
            </div>
            
            <div class="subject-card">
                <div class="subject-title">الأذنية</div>
                <input type="number" id="practical-otic" min="0" max="30" placeholder="العملي (من 30)">
                <input type="number" id="theoretical-otic" min="0" max="80" placeholder="النظري (من 80)">
            </div>
            
            <div class="subject-card">
                <div class="subject-title">النسائية</div>
                <input type="number" id="practical-gynecology" min="0" max="30" placeholder="العملي (من 30)">
                <input type="number" id="theoretical-gynecology" min="0" max="80" placeholder="النظري (من 80)">
            </div>
            
            <div class="subject-card">
                <div class="subject-title">الأطفال</div>
                <input type="number" id="practical-pediatrics" min="0" max="30" placeholder="العملي (من 30)">
                <input type="number" id="theoretical-pediatrics" min="0" max="80" placeholder="النظري (من 80)">
            </div>
        </div>
        
        <button onclick="calculateResults()">حساب المعدل النهائي</button>
        
        <div class="results-section" id="results-section">
            <div class="result-card">
                <div class="result-title">العلامات النهائية لكل مفردة (من 100):</div>
                <div id="subject-results"></div>
            </div>
            
            <div class="result-card">
                <div class="result-title">محصلة الكتل (من 100):</div>
                <div id="block-results"></div>
            </div>
            
            <div class="summary" id="final-result">
                سيظهر هنا المعدل العام والنتيجة النهائية
            </div>
            
            <div class="explanation">
                <div class="explanation-title">طريقة الحساب:</div>
                <p>1. تحويل العلامة العملية من 30 إلى 20: (العملي ÷ 30) × 20</p>
                <p>2. إضافة العلامة العملية المحولة إلى العلامة النظرية للحصول على العلامة النهائية للمفردة (من 100)</p>
                <p>3. حساب محصلة الكتل باستخدام الأوزان المحددة:</p>
                <ul>
                    <li>الكتلة الأولى: (الداخلية × 6 + الجلدية × 1) ÷ 7</li>
                    <li>الكتلة الثانية: (الجراحة × 5 + العينية × 1 + الأذنية × 1) ÷ 7</li>
                    <li>الكتلة الثالثة: النسائية × 4 ÷ 4</li>
                    <li>الكتلة الرابعة: الأطفال × 3 ÷ 3</li>
                </ul>
                <p>4. المعدل النهائي: متوسط محصلة الكتل الأربع</p>
            </div>
        </div>
    </div>

    <script>
        function calculateResults() {
            // جمع البيانات من الحقول
            const practicalScores = {
                'داخلية': parseFloat(document.getElementById('practical-internal').value) || 0,
                'جلدية': parseFloat(document.getElementById('practical-dermatology').value) || 0,
                'جراحة': parseFloat(document.getElementById('practical-surgery').value) || 0,
                'عينية': parseFloat(document.getElementById('practical-ocular').value) || 0,
                'أذنية': parseFloat(document.getElementById('practical-otic').value) || 0,
                'نسائية': parseFloat(document.getElementById('practical-gynecology').value) || 0,
                'أطفال': parseFloat(document.getElementById('practical-pediatrics').value) || 0
            };
            
            const theoreticalScores = {
                'داخلية': parseFloat(document.getElementById('theoretical-internal').value) || 0,
                'جلدية': parseFloat(document.getElementById('theoretical-dermatology').value) || 0,
                'جراحة': parseFloat(document.getElementById('theoretical-surgery').value) || 0,
                'عينية': parseFloat(document.getElementById('theoretical-ocular').value) || 0,
                'أذنية': parseFloat(document.getElementById('theoretical-otic').value) || 0,
                'نسائية': parseFloat(document.getElementById('theoretical-gynecology').value) || 0,
                'أطفال': parseFloat(document.getElementById('theoretical-pediatrics').value) || 0
            };
            
            // تحويل العلامات العملية من 30 إلى 20
            const convertedPractical = {};
            for (const subject in practicalScores) {
                convertedPractical[subject] = (practicalScores[subject] / 30) * 20;
            }
            
            // حساب العلامات النهائية لكل مفردة (من 100)
            const finalScores = {};
            for (const subject in theoreticalScores) {
                finalScores[subject] = theoreticalScores[subject] + convertedPractical[subject];
            }
            
            // حساب محصلة كل كتلة
            const blockScores = {};
            
            // الكتلة الأولى: داخلية (6 أمثال) + جلدية (1 مثل)
            blockScores['الكتلة الأولى'] = (finalScores['داخلية'] * 6 + finalScores['جلدية'] * 1) / 7;
            
            // الكتلة الثانية: جراحة (5 أمثال) + عينية (1 مثل) + أذنية (1 مثل)
            blockScores['الكتلة الثانية'] = (finalScores['جراحة'] * 5 + finalScores['عينية'] * 1 + finalScores['أذنية'] * 1) / 7;
            
            // الكتلة الثالثة: نسائية (4 أمثال)
            blockScores['الكتلة الثالثة'] = finalScores['نسائية'] * 4 / 4;
            
            // الكتلة الرابعة: أطفال (3 أمثال)
            blockScores['الكتلة الرابعة'] = finalScores['أطفال'] * 3 / 3;
            
            // حساب المعدل العام
            const totalScore = (blockScores['الكتلة الأولى'] + blockScores['الكتلة الثانية'] + 
                              blockScores['الكتلة الثالثة'] + blockScores['الكتلة الرابعة']) / 4;
            
            // عرض النتائج
            displayResults(finalScores, blockScores, totalScore);
        }
        
        function displayResults(finalScores, blockScores, totalScore) {
            // عرض نتائج المفردات
            let subjectResultsHTML = '';
            for (const subject in finalScores) {
                const passed = finalScores[subject] >= 40;
                subjectResultsHTML += `
                    <div class="subject-result">
                        <span>${subject}</span>
                        <span>${finalScores[subject].toFixed(2)} - 
                            <span class="${passed ? 'passed' : 'failed'}">${passed ? 'ناجح' : 'راسب'}</span>
                        </span>
                    </div>
                `;
            }
            document.getElementById('subject-results').innerHTML = subjectResultsHTML;
            
            // عرض نتائج الكتل
            let blockResultsHTML = '';
            for (const block in blockScores) {
                const passed = blockScores[block] >= 60;
                blockResultsHTML += `
                    <div class="subject-result">
                        <span>${block}</span>
                        <span>${blockScores[block].toFixed(2)} - 
                            <span class="${passed ? 'passed' : 'failed'}">${passed ? 'ناجح' : 'راسب'}</span>
                        </span>
                    </div>
                `;
            }
            document.getElementById('block-results').innerHTML = blockResultsHTML;
            
            // عرض النتيجة النهائية
            const allSubjectsPassed = Object.values(finalScores).every(score => score >= 40);
            const allBlocksPassed = Object.values(blockScores).every(score => score >= 60);
            const finalPassed = allSubjectsPassed && allBlocksPassed;
            
            let finalResultHTML = `
                <h3>المعدل العام: ${totalScore.toFixed(2)}</h3>
                <p>النتيجة النهائية: <span class="${finalPassed ? 'passed' : 'failed'}">${finalPassed ? 'ناجح في الامتحان' : 'راسب في الامتحان'}</span></p>
            `;
            
            if (!finalPassed) {
                if (!allSubjectsPassed) {
                    const failedSubjects = Object.keys(finalScores).filter(subject => finalScores[subject] < 40);
                    finalResultHTML += `<p>المفردات الراسبة: ${failedSubjects.join('، ')}</p>`;
                }
                
                if (!allBlocksPassed) {
                    const failedBlocks = Object.keys(blockScores).filter(block => blockScores[block] < 60);
                    finalResultHTML += `<p>الكتل الراسبة: ${failedBlocks.join('، ')}</p>`;
                }
            }
            
            document.getElementById('final-result').innerHTML = finalResultHTML;
            
            // إظهار قسم النتائج
            document.getElementById('results-section').style.display = 'block';
        }
    </script>
</body>
</html>